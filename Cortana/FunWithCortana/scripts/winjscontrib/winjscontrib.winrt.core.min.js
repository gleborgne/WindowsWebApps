/* 
 * WinJS Contrib v2.1.0.2
 * licensed under MIT license (see http://opensource.org/licenses/MIT)
 * sources available at https://github.com/gleborgne/winjscontrib
 */

var WinJSContrib=WinJSContrib||{};WinJSContrib.WinRT=WinJSContrib.WinRT||{},WinJSContrib.Alerts=WinJSContrib.Alerts||{},function(){WinJSContrib.WinRT.readProtocol=function(t){if(t.detail.kind===Windows.ApplicationModel.Activation.ActivationKind.protocol&&t.detail.uri){var n={action:void 0},e={},i=t.detail.uri.query;return"?"==i[0]&&(i=i.substr(1)),i&&i.split("&").forEach(function(t){var n=t.split("=");e[n[0]]=decodeURIComponent(n[1])}),n.protocol={action:t.detail.uri.host,args:e},n}},WinJSContrib.WinRT.isConnected=function(){var t=Windows.Networking.Connectivity.NetworkConnectivityLevel,n=Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile();if(null!==n){var e=n.getNetworkConnectivityLevel();return e===t.constrainedInternetAccess||e===t.internetAccess}return!1},WinJSContrib.WinRT.hasInternetAccess=function(){var t=Windows.Networking.Connectivity.NetworkConnectivityLevel,n=Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile();if(null!==n){var e=n.getNetworkConnectivityLevel();return e===t.internetAccess}return!1},WinJSContrib.WinRT.onInternetStatusChanged=function(t){var n=function(n){t(WinJSContrib.WinRT.hasInternetAccess())};return Windows.Networking.Connectivity.NetworkInformation.addEventListener("networkstatuschanged",n),function(){Windows.Networking.Connectivity.NetworkInformation.removeEventListener("networkstatuschanged",n)}},WinJSContrib.Alerts.messageBox=function(t){if(t){if(window.Windows){var n=new Windows.UI.Popups.MessageDialog(t.content);return t.title&&(n.title=t.title),t.commands&&t.commands.forEach&&t.commands.forEach(function(t,e){var i=new Windows.UI.Popups.UICommand;i.label=t.label,t.callback&&(i.invoked=t.callback),n.commands.append(i),t.isDefault&&(n.defaultCommandIndex=e)}),n.showAsync()}return new WinJS.Promise(function(n){var e="";t.title&&(e=t.title);var i=[];t.commands&&t.commands.forEach?t.commands.forEach(function(t){i.push(t.label)}):i=["Ok"],navigator&&navigator.notification&&navigator.notification.confirm?navigator.notification.confirm(t.content,function(e){if(t.commands&&t.commands[e-1]&&t.commands[e-1].callback){var i=t.commands[e-1].callback();i&&i.then?i.then(function(){n(!0)}):n(!0)}else n(0!=e?!0:!1)},e,i):n(window.confirm(e)?!0:!1)})}return WinJS.Promise.wrapError("you must specify commands as an array of objects with properties text and callback such as {text: '', callback: function(c){}}")},WinJSContrib.Alerts.message=function(t,n){return WinJSContrib.Alerts.messageBox({title:t,content:n})},WinJSContrib.Alerts.confirm=function(t,n,e,i){return new WinJS.Promise(function(o){WinJSContrib.Alerts.messageBox({title:t,content:n,commands:[{label:e,callback:function(){o(!0)},isDefault:!0},{label:i,callback:function(){o(!1)}}]})})},WinJSContrib.Alerts.toastNotification=function(t){if(!Windows)throw"No notification plugin found";var n=Windows.UI.Notifications,e=t.template||(t.picture?n.ToastTemplateType.toastImageAndText01:n.ToastTemplateType.toastText01),i=n.ToastNotificationManager.getTemplateContent(e),o=i.getElementsByTagName("text"),a=i.getElementsByTagName("image");if(t.launch){var r=i.getElementsByTagName("toast");r[0].setAttribute("launch",JSON.stringify(t.launch))}o[0].appendChild(i.createTextNode(t.text)),t.text2&&o.length>1&&o[1].appendChild(i.createTextNode(t.text2)),t.text3&&o.length>1&&o[2].appendChild(i.createTextNode(t.text3)),t.picture&&a[0].setAttribute("src",t.picture);var c=new n.ToastNotification(i),s=n.ToastNotificationManager.createToastNotifier();s.show(c)},WinJSContrib.Alerts.toast=function(t,n){WinJSContrib.Alerts.toastNotification({text:t,picture:n})}}();